# 配置DNS详解：Windows、macOS、Linux及路由器

DNS（Domain Name System）是互联网中用于将域名转换为IP地址的系统。正确配置DNS可以提升网络访问速度、增强安全性，并绕过某些地域限制。本文将详细介绍如何在Windows、macOS、Linux系统以及路由器上配置DNS。

## 1. Windows系统配置DNS

### 1.1 通过图形界面配置

1. **打开网络和共享中心**：

   - 使用快捷键组合：按下`Windows键` + `R`打开“运行”对话框。

   - 在对话框中输入`control`或`control.exe`。
   
   - 点击“确定”或按下回车键，这将直接打开控制面板。
   
   - 将【查看方式】由【类别】改为【大图标】或【小图标】。
   
   - 找到并进入【网络和共享中心】，然后点击【更改适配器设置】。

2. **进入网络适配器设置**：

   - 在更改适配器设置，点击当前连接的网络（如“以太网”或“Wi-Fi”）。

   - 在弹出的窗口中，点击“属性”。

3. **配置DNS**：

   - 在网络属性窗口中，双击“Internet协议版本4 (TCP/IPv4)”。

   - 选择“使用下面的DNS服务器地址”，然后输入首选DNS和备用DNS地址。例如：

     - 首选DNS：8.8.8.8（Google DNS）

     - 备用DNS：8.8.4.4（Google DNS）

   - 点击“确定”保存设置。

### 1.2 通过命令行配置

1. **打开命令提示符**：

   - 按 `Win + R`，输入 `cmd`，然后按回车。

2. **查看当前网络连接**：

   - 输入 `netsh interface show interface`，查看当前网络连接的名称。

3. **设置DNS**：

   - 输入以下命令设置DNS：

     ```bash

     netsh interface ip set dns name="以太网" source="static" address="8.8.8.8"

     netsh interface ip add dns name="以太网" address="8.8.4.4" index=2

     ```

   - 其中“以太网”是网络连接名称，根据实际情况替换。

## 2. macOS系统配置DNS

### 2.1 通过系统偏好设置配置

1. **打开系统偏好设置**：

   - 点击屏幕左上角的苹果菜单，选择“系统偏好设置”。

2. **进入网络设置**：

   - 在系统偏好设置中，点击“网络”。

3. **选择网络连接**：

   - 在左侧列表中选择当前使用的网络连接（如Wi-Fi或以太网），然后点击“高级”。

4. **配置DNS**：

   - 在“DNS”选项卡中，点击左下角的“+”按钮，添加DNS服务器地址。例如：

     - 8.8.8.8

     - 8.8.4.4

   - 点击“好”保存设置，然后点击“应用”使更改生效。

### 2.2 通过命令行配置

1. **打开终端**：

   - 打开“应用程序” > “实用工具” > “终端”。

2. **查看当前网络接口**：

   - 输入 `networksetup -listallnetworkservices`，查看当前网络接口名称。

3. **设置DNS**：

   - 输入以下命令设置DNS：

     ```bash

     networksetup -setdnsservers Wi-Fi 8.8.8.8 8.8.4.4

     ```

   - 其中“Wi-Fi”是网络接口名称，根据实际情况替换。

## 3. Linux系统配置DNS

### 3.1 通过NetworkManager配置

1. **打开网络设置**：

   - 在桌面环境中，点击右上角的网络图标，选择“网络设置”。

2. **选择网络连接**：

   - 在网络设置中，选择当前使用的网络连接（如有线或无线），然后点击“齿轮”图标进入设置。

3. **配置DNS**：

   - 在“IPv4”或“IPv6”选项卡中，将“自动”切换为“手动”，然后输入DNS服务器地址。例如：

     - 8.8.8.8, 8.8.4.4

   - 点击“应用”保存设置。

### 3.2 通过命令行配置

1. **编辑resolv.conf文件**：

   - 打开终端，输入以下命令编辑`/etc/resolv.conf`文件：

     ```bash

     sudo nano /etc/resolv.conf

     ```

   - 添加或修改以下内容：

     ```bash

     nameserver 8.8.8.8

     nameserver 8.8.4.4

     ```

   - 保存并退出。

2. **防止resolv.conf被覆盖**：

   - 在某些Linux发行版中，`resolv.conf`可能会被网络管理器覆盖。可以通过以下命令防止覆盖：

     ```bash

     sudo chattr +i /etc/resolv.conf

     ```

## 4. 路由器配置DNS

### 4.1 登录路由器管理界面

1. **获取路由器IP地址**：

   - 打开命令提示符或终端，输入 `ipconfig`（Windows）或 `ifconfig`（Linux/macOS），查看默认网关地址，通常为 `192.168.1.1` 或 `192.168.0.1`。

2. **登录路由器**：

   - 在浏览器中输入路由器IP地址，输入用户名和密码登录。

### 4.2 配置DNS

1. **找到DNS设置**：

   - 在路由器管理界面中，找到“网络设置”或“WAN设置”选项。

2. **输入DNS服务器地址**：

   - 在DNS设置中，输入首选DNS和备用DNS地址。例如：

     - 首选DNS：8.8.8.8

     - 备用DNS：8.8.4.4

   - 保存设置并重启路由器。

### 4.3 通过DHCP分发DNS

1. **找到DHCP设置**：

   - 在路由器管理界面中，找到“DHCP服务器”设置。

2. **配置DNS服务器**：

   - 在DHCP设置中，输入DNS服务器地址，这样所有连接到路由器的设备都会自动使用该DNS。

## 结语

通过以上步骤，您可以在Windows、macOS、Linux系统以及路由器上成功配置DNS。正确配置DNS不仅可以提升网络访问速度，还能增强网络安全性。希望本文对您有所帮助！

在这里附上DNS大全：[传送门](https://dnsdaquan.com/ "传送门")
